{% import 'variables-ios.jinja' as ios with context %}
{% import 'variables.jinja' as vars with context %}
{{ (vars.api_name + '/RealmPrimitives')|start_of_file -}}
{{- ios.file_header('RealmPrimitives.m') }}

#import "NSDate+ISO8601.h"
#import "RealmPrimitives.h"

@implementation RealmString @end

@implementation RealmInteger @end

@implementation RealmFloat @end

@implementation RealmDouble @end

@implementation RealmBool @end

@implementation RealmDate @end

@implementation RealmData @end

@implementation RealmDate (JSONable)

- (id<JSONable>)toJSON
{
    return self.value.iso8601;
}

@end

@implementation RealmString (JSONable)

- (id<JSONable>)toJSON
{
    return self.value;
}

@end

@implementation RealmInteger (JSONable)

- (id<JSONable>)toJSON
{
    return self.value;
}

@end

@implementation RealmFloat (JSONable)

- (id<JSONable>)toJSON
{
    return self.value;
}

@end

@implementation RealmDouble (JSONable)

- (id<JSONable>)toJSON
{
    return self.value;
}

@end

@implementation RealmBool (JSONable)

- (id<JSONable>)toJSON
{
    return self.value;
}

@end

@implementation RLMArray (JSONable)

- (id<JSONable>)toJSON
{
    NSMutableArray* jsoned = [NSMutableArray array];
    
    for(id<JSONable> jsonable in self) {
        [jsoned addObject:[jsonable toJSON]];
    }
    
    return [jsoned copy];
}

@end